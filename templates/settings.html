<h1 class="app-box-title">Settings</h1>
<p class="app-box-description">Manage your wallet settings and accounts.</p>
<div class="app-box-form">
    <div class="alert alert-danger" role="alert" id="settingsError" style="display: none;"></div>
    <div class="alert alert-success" role="alert" id="settingsSuccess" style="display: none;"></div>
    <div class="alert alert-warning" role="alert" id="settingsWarning" style="display: none;"></div> <!-- For warnings like needing unlock -->

    <!-- RPC Management (Unchanged) -->
    <div class="form-group">
        <label for="rpc_manager">Network Configuration</label>
        <div class="input-group mb-2">
            <select class="form-control" id="rpc_select">
                <option value="https://node.xian.org,https://explorer.xian.org">Mainnet (node.xian.org)</option>
                <option value="https://testnet.xian.org,https://testnet-explorer.xian.org">Testnet (testnet.xian.org)</option>
                <!-- Custom RPCs added here by JS -->
            </select>
            <div class="input-group-append">
                <button class="btn btn-sm btn-danger" id="remove_rpc_button" title="Remove Selected Custom Network"><i class="fas fa-trash-alt"></i></button>
            </div>
        </div>
        <div class="input-group mb-2">
            <input type="text" class="form-control" id="add_rpc_input" placeholder="Enter new RPC URL (e.g., https://my-node.com)">
            <div class="input-group-append">
                <button class="btn btn-sm btn-secondary" id="add_rpc_button" title="Add Custom Network"><i class="fas fa-plus"></i></button>
            </div>
        </div>
        <div class="input-group">
            <input type="text" class="form-control" id="add_explorer_input" placeholder="Enter corresponding Explorer URL (e.g., https://my-explorer.com)">
        </div>
    </div>
    <hr> <!-- Separator -->

    <!-- View Recovery Phrase Section (Unchanged) -->
    <div class="form-group">
        <label>Recovery Phrase (Mnemonic)</label>
        <p>This is your master key for accounts derived within this wallet. Keep it secret and safe! Anyone with this phrase can access all your *derived* accounts.</p>
        <a href="#" id="view_recovery_phrase_link">View Recovery Phrase</a>
        <div id="recovery_phrase_confirmation" style="display: none; margin-top: 10px;">
            <input type="password" class="form-control mb-2" id="recovery_phrase_password" placeholder="Enter password to confirm">
            <button class="btn btn-sm btn-warning" id="confirm_view_recovery_phrase">Confirm</button>
            <button class="btn btn-sm btn-secondary" id="cancel_view_recovery_phrase">Cancel</button>
        </div>
        <div id="recovery_phrase_display_area" class="alert alert-warning" style="display: none; margin-top: 10px; word-wrap: break-word;">
            <strong>Your Recovery Phrase:</strong><br>
            <span id="recovery_phrase_text"></span>
            <button class="btn btn-sm btn-secondary mt-2" id="hide_recovery_phrase">Hide Phrase</button>
        </div>
    </div>
    <hr> <!-- Separator -->

    <!-- **** NEW: Import Account with Private Key Section **** -->
    <div class="form-group">
        <label>Import Account with Private Key</label>
        <p>Import an existing external account using its private key. This account's key is **not** derived from your recovery phrase and must be backed up separately.</p>
         <div class="alert alert-danger" role="alert" id="importSkError" style="display: none;"></div> <!-- Specific Error Message Area -->
         <div class="alert alert-success" role="alert" id="importSkSuccess" style="display: none;"></div> <!-- Specific Success Message Area -->

        <div class="mb-2">
            <label for="importPrivateKeyInput" class="form-label small mb-1">Private Key (64 hex characters)</label>
            <input type="password" class="form-control form-control-sm" id="importPrivateKeyInput" placeholder="Enter private key">
        </div>
        <div class="mb-2">
            <label for="importAccountNameInput" class="form-label small mb-1">Account Name</label>
            <input type="text" class="form-control form-control-sm" id="importAccountNameInput" placeholder="Enter a name for this account">
        </div>
        <div class="mb-3">
            <label for="importPasswordConfirm" class="form-label small mb-1">Confirm Wallet Password</label>
            <input type="password" class="form-control form-control-sm" id="importPasswordConfirm" placeholder="Enter your wallet password to encrypt this key">
        </div>
        <button class="btn btn-sm btn-info" id="setting-import-private-key-btn">
             <i class="fas fa-key"></i> Import Account
        </button>
         <p class="small text-muted mt-2">Importing adds the account to this wallet instance. The private key will be encrypted with your wallet password. Remember to back up the original private key securely elsewhere.</p>
    </div>
    <hr> <!-- Separator -->
    <!-- **** END NEW SECTION **** -->


    <!-- Remove Wallet (Unchanged) -->
    <div class="form-group">
        <label for="remove_wallet_export">Remove Wallet</label>
        <p>Remove this wallet (including all accounts and the recovery phrase) from this browser. This action is irreversible without your recovery phrase or individual private keys.</p>
        <a href="#" id="remove_wallet_export" class="text-danger">Remove this Wallet</a>
    </div>
    <hr> <!-- Separator -->

    <!-- Version Info (Unchanged) -->
    <div class="form-group">
        <label for="version">Wallet Version</label>
        <p id="version">Loading...</p>
    </div>

</div>

<script src="templates/page_js/settings.js"></script>